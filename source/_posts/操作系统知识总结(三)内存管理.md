---
title: 操作系统知识总结(三)内存管理
date: 2019-09-04 11:13:57
tags: 内存
categoriese: 操作系统
---
将最近学习内存的知识，整理下！

<!-- more -->

#### 0x01 存储器的层次结构
##### 1 存储器的多层结构

&emsp;&emsp;存储层次至少应具有三级：最高层为CPU寄存器，中间为主存，最底层是辅存。具体可以分为下图

<img src="/img/存储器多层结构.png">

&emsp;&emsp;上图中，主存储器简称为内存或者主存，是计算机系统中的主要部件，用于保存进程运行时的程序和数据，也称可执行存储器。

&emsp;&emsp;在存储层次中，层次越高（越靠近CPU），存储介质的访问速度越快，价格也越高，相对所配置存储器的存储容量也越小。

##### 2 可执行存储器
&emsp;&emsp;寄存器和主存储器又被称为可执行存储器。进程可以在很少的始终周期内使用一条load或者store指令对可执行存储器进行访问。但对辅存的访问则需要通过I/O设备实现。因此，在访问中将涉及到中断、设备驱动程序以及物理设备的运行。所需耗费的时间远远高于访问可执行存储器的时间，一般相差3个数量级甚至更多。
##### 3 各个结构的简介

(1) 主存储器
&emsp;&emsp;主存储器简称为内存或主存，是计算机系统中的主要部件，用于保存进程运行时的程序和数据，也成为可执行存储器。通常，处理机都是从主存储器中取得指令和数据的，并将其所取得的指令放入指令寄存器中，而将其所获取的数据装入到数据寄存器中；或者反之，将寄存器中的数据存入到主存储器。由于主存储器访问速度远低于CPU执行指令的速度，为了缓和这一矛盾，在计算机系统中引入了寄存器和高速缓存。

(2) 寄存器
&emsp;&emsp;寄存器具有与处理机相同的速度，故对寄存器的访问速度最快，完全能与CPU协调工作，但价格却十分昂贵，因此容量不可能做的很大。

(3) 高速缓存（Cache）
&emsp;&emsp;介于寄存器和存储器之间的存储器，主要用于备份主存中较常用的数据，以减少处理机对主存储器的访问次数，这样可以大幅度地提高程序执行速度。通常，进程的程序和数据存放在主存储器中，每当访问的时，才被临时复制到一个速度较快的高速缓存中。这样，当CPU访问一组特定信息时，须首先检查它是否在高速缓存中，如果已经存在，便可直接从中取出使用，以避免访问主存，否则，就须从主存中读出信息。

(4)磁盘缓存
&emsp;&emsp;由于磁盘的I/O速度远低于主存的访问速度，为了缓和两者之间在速度上的不匹配，而设置了磁盘缓存，主要用于暂时存放频繁使用的一部分磁盘数据和信息，以减少访问磁盘的次数

#### 0x02 连续分配方式

为了将用户程序装入内存，必须为它分配一定大小的内存空间。使用最早的分配方式方式是连续分配方式，该方式将一个用户程序分配一个连续的内存空间，即程序中代码或数据的逻辑地址相邻。体现在内存空间分配时物理地址的相邻。
连续分配方式可以分为四类：
- 单一连续分配
- 固定分配
- 动态分区分配
- 动态可重定向位分区

##### 1. 单一连续分配
&emsp;&emsp;适应于单道程序环境。
##### 2. 固定分区分配
&emsp;&emsp;固定分区分配是最早出现的、可用于多道程序系统中的存储管理方式，由于每个分区的大小固定，必然会造成储存空间的浪费，因而现在已经很少将它用于通用的OS中。**但在某些用于控制多个相同对象的控制系统中，由于每个对象的控制程序大小相同，是事先已编好的，其所需的数据也是一定的，故仍采用固定分区分配的存储管理方式**
    
